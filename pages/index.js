import Head from 'next/head'
import Image from 'next/image'
import styles from '../styles/Home.module.css'
import { points } from '../logic/points.js'
import { useState } from 'react';
import image from '../image.jpeg'

export default function Home() {
  var countdown = 10;
  var correctText;
  const [userPoints, setUserPoints] = useState(0);
  const [clickable, setClickable] = useState(true);

  function timer() {
    let int = setInterval(() => {
      document.querySelector('#countdownText').innerText = countdown;
      (countdown <= 0) ? countdown = 0 : countdown--;
    }, 1000);
  }

  function selectImage(x) {
    if (clickable) {
      setClickable(false);
    } else {
      return;
    }

    var p = points(x);
    document.querySelectorAll('.photo')[x].style.cssText = (p) ? "border: 5px solid green;" : "border: 5px solid red;";
    // document.querySelector('#points').innerText = (p) ? userPoints + 10 : userPoints;
    // userPoints += 10;
    setUserPoints(userPoints+10);
  }

  return (
    <div className={styles.container}>
      <Head>
        <title>Real Human</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>

        <div id="countdown" className={styles.countdown}>
          <div id="countdownText" className={styles.countdownText}>10</div>
          <svg className={styles.svg}>
            <circle r="45" cx="50" cy="50"></circle>
          </svg>
        </div>

        <h1 className={styles.title}>
          Choose the real human
        </h1>
        
        <h2>{correctText}</h2>
        
        <div className={styles.grid}>

          <div onClick={() => selectImage(0)} className={`${styles.card} photo`}>
            <Image
              className={styles.img}
              src={image}
              alt="Picture"
              width="300px"
              height="300px"
            />
          </div>

          <div onClick={() => selectImage(1)} className={`${styles.card} photo`}>
            <Image
              className={styles.img}
              src={image}
              alt="Picture"
              width="300px"
              height="300px"
              onLoad={ () => {timer();} }
            />
          </div>

        </div>

        <h2 id="points">Points: {userPoints}</h2>
        
      </main>
    </div>
  )
}
